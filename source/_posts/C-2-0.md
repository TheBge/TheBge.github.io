title: C++ 2.0
author: Bing
tags:
  - c++
categories: []
date: 2021-02-06 11:10:00
---
1.语言  
2.标准库  

### 语言  
**Variadic Templates**  

**nullptr/auto**  

**Uniform Initialization**  
在C++11之前，初始化可能发生在小括号 大括号 复制符号。  
现在全部都可以使用大括号。 
编译器看到{...},就做出一个initializer_list<T>,关联到一个array<T, n>。调用函数（如ctor）时array内的元素被分解逐一传给函数  
  
**explicit**  

![upload successful](/images/pasted-14.png) 
``` c++
Complex c1(12, 5);
Complex c2 = c1 + 5;
```  
左边编译器会隐式调用构造函数，变成复数加复数。右边会报错。  
``` c++
#include <iostream>
#include <initializer_list>
using namespace std;

class P
{
public:
    P(int a, int b)
    {
        cout << "P(int a, int b)" << endl;
    }

    //P(initializer_list<int>input)
    //{
    //    cout << "initializer_list<int>input" << endl;
    //}

    explicit P(int a, int b, int c)
    {
        cout << "int a, int b, int c" << endl;
    }
};

void fp(const P& input)
{
}

int main()
{
    // ctors
    cout << "ctors" << endl;
    P p1(77, 5); // P(int a, int b)
    P p2{ 77, 5 }; // P(initializer_list<int>input) 
    P p3{ 77, 5, 42 }; // P(initializer_list<int>input) 
    P p4 = { 77, 5 }; // P(initializer_list<int>input) 
    P p5 = { 77, 5, 42 }; // P(initializer_list<int>input),如果删了initializer_list的构造函数
                        //，这句就会报错, error: converting to ‘P’ from initializer
                        //list would use explicit constructor ‘P::P(int, int, int)’
    P p6(77, 5, 42); // explicit P (int a, int b, int c) 
    P p7{ 77, 5, 42, 500 };// P(initializer_list<int>input) 
    P p8 = { 77, 5, 42, 500 };// P(initializer_list<int>input) 
    P p9{ 10 };// P(initializer_list<int>input) 

    // call function
    cout << "call function" << endl;
    fp({ 47, 11 });        // P(initializer_list<int>input)
    fp({ 47, 11, 3 });    // P(initializer_list<int>input)
    fp(P{ 47, 11 });       // P(initializer_list<int>input)
    fp(P{ 47, 11, 3 });    // P(initializer_list<int>input)

    return 0;
}
```  

注释掉initializer_list的构造函数
![upload successful](/images/pasted-15.png)  
不注释掉的结果
![upload successful](/images/pasted-16.png)  

**range based for**  
这个就见的很多了，注意for中也许有隐式的转换。  

**=delete =default**